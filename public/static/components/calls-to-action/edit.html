<form>
  {{ widget.available_calls_to_action.best_value }}
  <div class="field">
    {{ widget.cta_one_text.id_hidden_field }}
    <label name="{{ widget.cta_one_text.value_field_name}}">
      CTA One Text
    </label>
    <input type="text"
      id="{{ widget.cta_one_text.value_field_id}}"
      name="{{ widget.cta_one_text.value_field_name}}"
      value="{{ widget.cta_one_text.value }}" />
  </div>

  <div class="field">
    {{ widget.cta_one_url.id_hidden_field }}
    <label name="{{ widget.cta_one_url.value_field_name}}">
      CTA One URL
    </label>
    <select
      id="{{ widget.cta_one_url.value_field_id}}"
      name="{{ widget.cta_one_url.value_field_name}}"
    >
      <option value="">Please Select</option>
      {% for cta in widget.available_calls_to_action.best_value %}
        <option value="{{ cta[1] }}"
          {% if widget.cta_one_url.value == cta[1] %}selected="selected"{% endif %}>
          {{ cta[1] }}
        </option>
      {% endfor %}
    </select>
  </div>

  <div class="field">
    {{ widget.cta_two_text.id_hidden_field }}
    <label name="{{ widget.cta_two_text.value_field_name}}">
      CTA Two Text
    </label>
    <input type="text"
      id="{{ widget.cta_two_text.value_field_id}}"
      name="{{ widget.cta_two_text.value_field_name}}"
      value="{{ widget.cta_two_text.value }}" />
  </div>

  <div class="field">
    {{ widget.cta_two_url.id_hidden_field }}
    <label name="{{ widget.cta_two_url.value_field_name}}">
      CTA Two URL
    </label>
    <select
      id="{{ widget.cta_two_url.value_field_id}}"
      name="{{ widget.cta_two_url.value_field_name}}"
    >
      <option value="">Please Select</option>
      {% for cta in widget.available_calls_to_action.best_value %}
        <option value="{{ cta[1] }}"
          {% if widget.cta_two_url.value == cta[1] %}selected="selected"{% endif %}>
          {{ cta[1] }}
        </option>
      {% endfor %}
    </select>
  </div>

  <div class="field">
    {{ widget.cta_three_text.id_hidden_field }}
    <label name="{{ widget.cta_three_text.value_field_name}}">
      CTA Three Text
    </label>
    <input type="text"
      id="{{ widget.cta_three_text.value_field_id}}"
      name="{{ widget.cta_three_text.value_field_name}}"
      value="{{ widget.cta_three_text.value }}" />
  </div>

  <div class="field">
    {{ widget.cta_three_url.id_hidden_field }}
    <label name="{{ widget.cta_three_url.value_field_name}}">
      CTA Three URL
    </label>
    <select
      id="{{ widget.cta_three_url.value_field_id}}"
      name="{{ widget.cta_three_url.value_field_name}}"
    >
      <option value="">Please Select</option>
      {% for cta in widget.available_calls_to_action.best_value %}
        <option value="{{ cta[1] }}"
          {% if widget.cta_three_url.value == cta[1] %}selected="selected"{% endif %}>
          {{ cta[1] }}
        </option>
      {% endfor %}
    </select>
  </div>

  <div class="field">
    {{ widget.cta_four_text.id_hidden_field }}
    <label name="{{ widget.cta_four_text.value_field_name}}">
      CTA Four Text
    </label>
    <input type="text"
      id="{{ widget.cta_four_text.value_field_id}}"
      name="{{ widget.cta_four_text.value_field_name}}"
      value="{{ widget.cta_four_text.value }}" />
  </div>

  <div class="field">
    {{ widget.cta_four_url.id_hidden_field }}
    <label name="{{ widget.cta_four_url.value_field_name}}">
      CTA Four URL
    </label>
    <select
      id="{{ widget.cta_four_url.value_field_id}}"
      name="{{ widget.cta_four_url.value_field_name}}"
    >
      <option value="">Please Select</option>
      {% for cta in widget.available_calls_to_action.best_value %}
        <option value="{{ cta[1] }}"
          {% if widget.cta_four_url.value == cta[1] %}selected="selected"{% endif %}>
          {{ cta[1] }}
        </option>
      {% endfor %}
    </select>
  </div>

  <input type="submit" value="Save" />
</form>

<script type="text/javascript">
  (function() {
    window.UniqueSelectValues = (function() {
      function UniqueSelectValues(selects) {
        var _this = this;

        this.selects = selects;
        this.disableOptions();
        this.selects.change(function() {
          return _this.disableOptions();
        });
      }

      UniqueSelectValues.prototype.disableOptions = function() {
        var select, _i, _len, _ref, _results;

        this.enableAll();
        _ref = this.selects;
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          select = _ref[_i];
          if (select.value !== '') {
            _results.push(this.makeDisabled(select));
          }
        }
        return _results;
      };

      UniqueSelectValues.prototype.enableAll = function() {
        var option, _i, _len, _ref, _results;

        _ref = this.selects.children();
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          option = _ref[_i];
          if (option.disabled) {
            _results.push($(option).removeAttr('disabled'));
          }
        }
        return _results;
      };

      UniqueSelectValues.prototype.makeDisabled = function(select) {
        var options;

        options = this.selects.not(select).children("[value='" + select.value + "']");
        return options.attr('disabled', 'disabled');
      };

      return UniqueSelectValues;

    })();

  }).call(this);

  $(
  function(){
    new window.UniqueSelectValues($("div.field select"));
  });
</script>
